<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Liberation Sans";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"AR PL UMing HK";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Lohit Devanagari";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Liberation Mono";
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Nimbus Mono L";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Liberation Serif";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:7.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Liberation Sans","sans-serif";
	color:#666666;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Header Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Footer Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
code
	{font-family:"Courier New";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Liberation Sans","sans-serif";
	color:#666666;
	font-weight:bold;}
p.PreformattedText, li.PreformattedText, div.PreformattedText
	{mso-style-name:"Preformatted Text";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Liberation Mono";}
span.HeaderChar
	{mso-style-name:"Header Char";
	mso-style-link:Header;}
span.FooterChar
	{mso-style-name:"Footer Char";
	mso-style-link:Footer;}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-AU link=blue vlink=purple>

<div class=WordSection1>

<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:28.0pt;line-height:115%;font-family:"Liberation Sans","sans-serif";
color:#006666'>Archiver Appliance Support for EPICS Qt</span></b></p>

<p class=MsoNormal><b><span style='font-size:18.0pt;line-height:115%;
font-family:"Liberation Sans","sans-serif";color:#0093D9'>&nbsp;</span></b></p>

<p class=MsoNormal><b><span style='font-size:18.0pt;line-height:115%;
font-family:"Liberation Sans","sans-serif";color:#0093D9'>Introduction</span></b></p>

<p class=MsoNormal><a href="https://slacmshankar.github.io/epicsarchiver_docs/"><span
style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>EPICS
Archiver Appliance</span></a><span style='font-size:12.0pt;line-height:115%;
font-family:"Liberation Serif","serif"'> (AA) has been around for a while now
and it seems to be becoming a successor of EPICS Channel Access Archive. As the
Australian Synchrotron is also on the path of switching to AA, a decision to
add support for AA in QE Framework has been made.</span></p>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>In this page you will find some information about some
design decisions, how to prepare build environment and how to build QE
Framework with AA.</span></p>

<p class=MsoNormal><b><span style='font-size:18.0pt;line-height:115%;
font-family:"Liberation Sans","sans-serif";color:#0093D9'>&nbsp;</span></b></p>

<p class=MsoNormal><b><span style='font-size:18.0pt;line-height:115%;
font-family:"Liberation Sans","sans-serif";color:#0093D9'>Design Decisions</span></b></p>

<h3 style='margin-left:.5in;text-indent:-.5in'>AA Version</h3>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>During the development of AA support for QE
Framework a requirements for some extra AA features have arisen. Developers of
AA have been kind enough to add those features to the project; this however
means that we have introduced a dependency on a specific version of AA. </span></p>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>AA support for QE Framework has been developed with
<b>Fall 2017 release (tag</b> <b>v0.0.1_SNAPSHOT_27-November-2017)</b> of AA.
Most probably it will work with newer versions; it definitely won’t work with
older ones.</span></p>

<h3 style='margin-left:.5in;text-indent:-.5in'>Google Protocol Buffers</h3>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>Archived data can be retrieved from AA in many
different formats, however Google Protocol Buffers (PB) are AA’s native
serializing tool and provide fast and efficient serialization. Speed was the
main reason to go with PB, consequently this means that PB libraries, headers
and executables need to be present on the machine at build time and run time.
On most Linux distributions these are readily available to be installed using distribution’s
package manager.</span></p>

<h3 style='margin-left:.5in;text-indent:-.5in'>archapplDataSup</h3>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>All PB related code has been separated into a new
application, namely archapplDataSup (located in the QE framework top directory).
Building of this application is dependent on how environment variables are set
up. Built library has only one entry point and one data structure. The entry
point is a function that takes raw PB input received from AA and saves parsed
data into a vector whose reference has been passed to the function.</span></p>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>This means that there are no dependencies on PB in
the code of QE Framework Qt project which allows the project to be built in
exactly the same way as before, if no additional environment variables are
defined.</span></p>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>This also means that archapplDataSup can be used as
a standalone library for any other cases were parsing of AA’s PB data is
needed.</span></p>

<h3 style='margin-left:.5in;text-indent:-.5in'>Qt 5.0 +</h3>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>In Qt 5.0 support for JSON has been introduced as
well as support for easy URL query composition. Since Qt 5.0 has been around
for a while, those libraries have been used. This means that in order to build QE
Framework with AA support, Qt 5.0 or higher must be used. </span></p>

<h3 style='margin-left:.5in;text-indent:-.5in'>Obsolete functions</h3>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>Some of the functions have become obsolete and are
only there so that any of references to them from external applications don’t become
broken. These functions are:</span></p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-size:12.0pt;line-height:115%;font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>QEArchiveAccess::initialize()
- Not needed anymore with new modifications.</span></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-size:12.0pt;line-height:115%;font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>QEArchiveAccess::initialize(const
QString&amp; archives, const QString&amp; pattern) – This functionality has now
been removed. Archives and pattern can now only be defined using
QE_ARCHIVE_LIST and QE_ARCHIVE_PATTERN environment variables respectively.</span></p>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>&nbsp;</span></p>

<p class=MsoNormal><b><span style='font-size:18.0pt;line-height:115%;
font-family:"Liberation Sans","sans-serif";color:#0093D9'>Getting Ready</span></b></p>

<h3 style='margin-left:.5in;text-indent:-.5in'>Have AA Deployed</h3>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>There’s an extensive guide on how to do that on</span>
<a href="https://slacmshankar.github.io/epicsarchiver_docs/"><span
style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>AA’s
website</span></a><span class=MsoHyperlink><span style='font-size:12.0pt;
line-height:115%;font-family:"Liberation Serif","serif"'>.</span></span> <span
style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>As
mentioned before, AA support for QE Framework requires <b>Fall 2017 release
(tag</b> <b>v0.0.1_SNAPSHOT_27-November-2017)</b> or newer.</span></p>

<h3 style='margin-left:.5in;text-indent:-.5in'>Install Google Protocol Buffers</h3>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>AA support for QE Framework has been tested with
versions 2.5.0 and 3.5.0 and 3.5.1</span></p>

<p class=MsoNormal><b><span style='font-size:12.0pt;line-height:115%;
font-family:"Liberation Serif","serif"'>On Linux</span></b></p>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>This should be fairly painless. All major
distributions should have PB software available via their package managers. So
in case of Fedora and other RedHat flavours you’d run:</span></p>

<p class=PreformattedText>yum install –y protobuf</p>

<p class=PreformattedText>&nbsp;</p>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>At least in the case of CentOS 7, this will install
a fairly old version of PB (2.5.0). For the purpose of AA support in QE
Framework, this is good enough, however you can get the latest version of PB
from their </span><a href="https://github.com/google/protobuf/releases/latest"><span
style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>github
releases website</span></a><span style='font-size:12.0pt;line-height:115%;
font-family:"Liberation Serif","serif"'>.</span></p>

<p class=MsoNormal><b><span style='font-size:12.0pt;line-height:115%;
font-family:"Liberation Serif","serif"'>On Windows</span></b></p>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>As expected, here is where it gets a bit trickier.
So far the building of PB has only been tested with MinGW on Windows 7 and
Windows 10, both x64.</span></p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-size:12.0pt;line-height:115%;font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>CMake
needs to be installed. It can be found </span><a
href="https://cmake.org/download/"><span style='font-size:12.0pt;line-height:
115%;font-family:"Liberation Serif","serif"'>here</span></a></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:1.0in;text-indent:-.25in'><span
style='font-size:12.0pt;line-height:115%;font-family:"Courier New"'>o<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>Make
sure that the directory containing cmake.exe is on the PATH</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-size:12.0pt;line-height:115%;font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>MinGW
needs to be installed, I simply used the one that comes with Qt installation</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:1.0in;text-indent:-.25in'><span
style='font-size:12.0pt;line-height:115%;font-family:"Courier New"'>o<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>Make
sure you add &lt;MinGW_DIR&gt;\bin and &lt;MinGW_DIR&gt;\lib to the PATH </span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:1.0in;text-indent:-.25in'><span
style='font-size:12.0pt;line-height:115%;font-family:"Courier New"'>o<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>If
you haven’t already, rename &lt;MinGW_DIR&gt;\bin\mingw32-make to make for
convenience</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-size:12.0pt;line-height:115%;font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>Download
the source for C++ code from </span><a
href="https://github.com/google/protobuf/releases/latest"><span
style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>github
releases website</span></a><span style='font-size:12.0pt;line-height:115%;
font-family:"Liberation Serif","serif"'>. The package name should be in the
format of “protobuf-cpp-x.x.x.zip”. Extract it.</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-size:12.0pt;line-height:115%;font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>Open
command prompt</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-size:12.0pt;line-height:115%;font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>Navigate
to the directory where you have previously extracted PB source code to
(PB_DIR). </span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-size:12.0pt;line-height:115%;font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>Navigate
to &lt;PB_DIR&gt;/cmake, create directories &lt;PB_DIR&gt;/cmake/build/release
and move into newly created directory.</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-bottom:0in;margin-bottom:
.0001pt;text-indent:-.25in;line-height:15.0pt;vertical-align:baseline'><span
style='font-size:10.5pt;font-family:Symbol;color:#333333'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;font-family:"Liberation Serif","serif"'>Run
the following:</span></p>

<p class=MsoListParagraphCxSpLast style='margin-bottom:0in;margin-bottom:.0001pt;
line-height:15.0pt;vertical-align:baseline'><span style='font-size:10.5pt;
font-family:"Liberation Mono";color:#333333'>cmake&nbsp;-G&nbsp;&quot;MinGW
Makefiles&quot;&nbsp;^</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.5in;margin-bottom:.0001pt;line-height:15.0pt;vertical-align:baseline'><span
style='font-size:10.5pt;font-family:"Liberation Mono";color:#333333'>-DCMAKE_BUILD_TYPE=Release
^</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.5in;margin-bottom:.0001pt;line-height:15.0pt;vertical-align:baseline'><span
style='font-size:10.5pt;font-family:"Liberation Mono";color:#333333'>-DCMAKE_CXX_STANDARD=11
^</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.5in;margin-bottom:.0001pt;line-height:15.0pt;vertical-align:baseline'><span
style='font-size:10.5pt;font-family:"Liberation Mono";color:#333333'>-Dprotobuf_BUILD_SHARED_LIBS=ON
^</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.5in;margin-bottom:.0001pt;line-height:15.0pt;vertical-align:baseline'><span
style='font-size:10.5pt;font-family:"Liberation Mono";color:#333333'>-Dprotobuf_BUILD_TESTS=OFF
^</span></p>

<p class=MsoNormal style='margin-top:0in;margin-right:0in;margin-bottom:0in;
margin-left:.5in;margin-bottom:.0001pt;line-height:15.0pt;vertical-align:baseline'><span
style='font-size:10.5pt;font-family:"Liberation Mono";color:#333333'>-DCMAKE_INSTALL_PREFIX=&lt;</span>
<span style='font-size:10.5pt;font-family:"Liberation Mono";color:#333333'>MinGW_DIR&gt;
../..</span></p>

<p class=MsoListParagraphCxSpFirst><span style='font-size:12.0pt;line-height:
115%;font-family:"Liberation Mono"'>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-size:12.0pt;line-height:
115%;font-family:"Liberation Serif","serif"'>This will generate Makefiles for
MinGW, which will be used to build Release build, have default C++ version set
to C++11, build dynamic libraries, avoid building tests and install generated
files in &lt;MinGW_DIR&gt;/lib, &lt;MinGW_DIR&gt;/bin and
&lt;MinGW_DIR&gt;/include</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-size:12.0pt;line-height:115%;font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>Run:</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-size:10.5pt;line-height:
115%;font-family:"Liberation Mono"'>make –j3      # j3 is optional but it makes
building a lot faster</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-size:10.5pt;line-height:
115%;font-family:"Liberation Mono"'>make install</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-size:12.0pt;line-height:115%;font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>Check
that everything has been installed successfully by running:</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-size:10.5pt;line-height:
115%;font-family:"Liberation Mono"'>protoc</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-size:12.0pt;line-height:
115%;font-family:"Liberation Serif","serif"'>This should print the help for
this command.</span></p>

<p class=MsoListParagraphCxSpLast><span style='font-size:12.0pt;line-height:
115%;font-family:"Liberation Serif","serif"'>&nbsp;</span></p>

<h3 style='margin-left:.5in;text-indent:-.5in'>Set Environment Variables</h3>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>Three new optional environment variables have been
introduced with AA support for QE Framework:</span></p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-size:12.0pt;line-height:115%;font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>QE_ARCHAPPL_SUPPORT
– This is a build time variable. If set to YES, QE Framework will be built with
support for AA. If not defined, support for AA will not be built.</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-size:12.0pt;line-height:115%;font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>QE_ARCHIVE_TYPE
– This is a run time variable. It can take of two values (CA, ARCHAPPL) where
CA defines that we’re connecting to EPICS Channel Access Archive and ARCHAPPL
defines we’re connecting to AA. If not defined, QT Framework will try to
connect to EPICS Channel Access Archive.</span></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-size:12.0pt;line-height:115%;font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>PROTOBUF_LIBS_DIR
– This is a build time variable. In case PB libraries are not on your PATH
(Windows) or LD_LIBRARY_PATH (Linux), this variable is used while building
archapplDataApp to point to PB libraries directory.</span></p>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>&nbsp;</span></p>

<p class=MsoNormal><b><span style='font-size:18.0pt;line-height:115%;
font-family:"Liberation Sans","sans-serif";color:#0093D9'>Building</span></b></p>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>Once PB is installed and variables set, QE
Framework can be normally built in the same way as it has been built before, by
executing “make” in the QE Framework’s TOP directory.</span></p>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>The build with AA support enabled will result in
two new libraries archapplData.* in QE Framework’s libraries directory and one
new header archapplData.h in framework’s include directory.</span></p>

<p class=MsoNormal><b><span style='font-size:18.0pt;line-height:115%;
font-family:"Liberation Sans","sans-serif";color:#0093D9'>&nbsp;</span></b></p>

<p class=MsoNormal><b><span style='font-size:18.0pt;line-height:115%;
font-family:"Liberation Sans","sans-serif";color:#0093D9'>Running</span></b></p>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>The only thing that’s left to do now is to define
the URL in QE_ARCHIVE_LIST to the AA. The URL should point to AA’s management
BPL so something like </span><a href="http://archiver01/mgmt/bpl"><span
style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>http://archiver01/mgmt/bpl</span></a><span
style='font-size:12.0pt;line-height:115%;font-family:"Liberation Serif","serif"'>
(protocol and port are not required; default is http and port 80). </span></p>

<p class=MsoNormal><span style='font-size:12.0pt;line-height:115%;font-family:
"Liberation Serif","serif"'>&nbsp;</span></p>

</div>

</body>

</html>
